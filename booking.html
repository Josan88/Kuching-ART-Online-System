<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Tickets – Kuching ART</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>

<body>
  <header>
    <div class="container">
      <div class="logo">
        <h1>Kuching ART</h1>
        <p>Autonomous Rapid Transit</p>
      </div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#schedules">Schedules</a></li>
          <li><a href="index.html#routes">Routes</a></li>
          <li><a href="index.html#fares">Fares</a></li>
          <li><a href="index.html#contact">Contact</a></li>
          <li><a href="merchandise.html">Merchandise</a></li>
          <li><a href="login.html" class="login-btn">Login / Register</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="booking-section">
    <div class="container">
      <div class="booking-container">
        <h2 class="booking-title">Book Your Tickets</h2>

        <div class="booking-steps">
          <div class="booking-step active" id="step1">
            <div class="step-number">1</div>
            <div class="step-label">Trip Details</div>
          </div>
          <div class="booking-step" id="step2">
            <div class="step-number">2</div>
            <div class="step-label">Select Trip</div>
          </div>
          <div class="booking-step" id="step3">
            <div class="step-number">3</div>
            <div class="step-label">Passenger Info</div>
          </div>
          <div class="booking-step" id="step4">
            <div class="step-number">4</div>
            <div class="step-label">Payment</div>
          </div>
          <div class="booking-step" id="step5">
            <div class="step-number">5</div>
            <div class="step-label">Confirmation</div>
          </div>
        </div>

        <!-- Step 1: Trip Details -->
        <div class="step-content" id="step1-content">
          <form id="tripDetailsForm">
            <div class="booking-form-grid">
              <div class="form-group">
                <label for="origin">Origin Station</label>
                <select id="origin" name="origin" required>
                  <option value="">Select Origin</option>
                  <option value="kuching-sentral">Kuching Sentral</option>
                  <option value="satok">Satok</option>
                  <option value="damai">Damai</option>
                  <option value="petra-jaya">Petra Jaya</option>
                  <option value="samarahan">Samarahan</option>
                </select>
              </div>
              <div class="form-group">
                <label for="destination">Destination Station</label>
                <select id="destination" name="destination" required>
                  <option value="">Select Destination</option>
                  <option value="kuching-sentral">Kuching Sentral</option>
                  <option value="satok">Satok</option>
                  <option value="damai">Damai</option>
                  <option value="petra-jaya">Petra Jaya</option>
                  <option value="samarahan">Samarahan</option>
                </select>
              </div>
              <div class="form-group">
                <label for="travel-date">Travel Date</label>
                <input type="date" id="travel-date" name="travelDate" required />
              </div>
              <div class="form-group">
                <label for="passengers">Number of Passengers</label>
                <select id="passengers" name="passengers" required>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </div>
            </div>
            <div class="booking-actions">
              <a href="index.html" class="btn secondary-btn">Cancel</a>
              <button type="button" class="btn primary-btn" id="step1-next">
                Next: Select Trip
              </button>
            </div>
          </form>
        </div>

        <!-- Step 2: Select Trip -->
        <div class="step-content" id="step2-content" style="display: none;">
          <h3>Available Trips</h3>
          <div class="available-trips" id="available-trips">
            <!-- booking.js will inject trip radio buttons here -->
          </div>
          <div class="booking-actions">
            <button type="button" class="btn secondary-btn" id="step2-back">
              Previous
            </button>
            <button type="button" class="btn primary-btn" id="step2-next" disabled>
              Next: Passenger Info
            </button>
          </div>
        </div>

        <!-- Step 3: Passenger Info -->
        <div class="step-content" id="step3-content" style="display: none;">
          <h3>Passenger Information</h3>
          <div id="passenger-forms">
            <!-- booking.js will generate exactly N “.passenger-form” blocks here -->
          </div>
          <div class="booking-actions">
            <button type="button" class="btn secondary-btn" id="step3-prev">
              Previous
            </button>
            <button type="button" class="btn primary-btn" id="step3-next">
              Next: Payment
            </button>
          </div>
        </div>

        <!-- Step 4: Payment -->
        <div class="step-content" id="step4-content" style="display: none;">
          <h3>Payment Information</h3>
          <div class="booking-summary">
            <h3>Trip Summary</h3>
            <div id="trip-summary"></div>
            <div class="summary-total">
              <div class="summary-item">
                <span>Total:</span>
                <span id="total-price">RM 0.00</span>
              </div>
            </div>
          </div>
          <form id="paymentForm">
            <h3>Payment Method</h3>
            <div class="form-group">
              <input type="radio" id="card-payment" name="paymentMethod" value="card" checked />
              <label for="card-payment">Credit/Debit Card</label>
            </div>
            <div id="card-payment-details">
              <div class="form-group">
                <label for="card-name">Cardholder Name</label>
                <input type="text" id="card-name" name="cardName" required />
              </div>
              <div class="form-group">
                <label for="card-number">Card Number</label>
                <input type="text" id="card-number" name="cardNumber" placeholder="XXXX XXXX XXXX XXXX" required />
              </div>
              <div class="booking-form-grid">
                <div class="form-group">
                  <label for="card-expiry">Expiry Date (MM/YY)</label>
                  <input type="text" id="card-expiry" name="cardExpiry" placeholder="MM/YY" required />
                </div>
                <div class="form-group">
                  <label for="card-cvv">CVV</label>
                  <input type="text" id="card-cvv" name="cardCvv" placeholder="XXX" required />
                </div>
              </div>
            </div>

            <div class="form-group">
              <input type="radio" id="e-wallet-payment" name="paymentMethod" value="ewallet" />
              <label for="e-wallet-payment">E-Wallet</label>
            </div>
            <div id="e-wallet-payment-details" style="display: none;">
              <div class="form-group">
                <label for="wallet-type">E-Wallet Provider</label>
                <select id="wallet-type" name="walletType">
                  <option value="">Select Provider</option>
                  <option value="boost">Boost</option>
                  <option value="grabpay">GrabPay</option>
                  <option value="tng">Touch ’n Go eWallet</option>
                </select>
              </div>
              <div class="form-group">
                <label for="wallet-number">E-Wallet Phone Number</label>
                <input type="tel" id="wallet-number" name="walletNumber" placeholder="Enter phone number" />
              </div>
            </div>
          </form>
          <div class="booking-actions">
            <button type="button" class="btn secondary-btn" id="step4-prev">
              Previous
            </button>
            <button type="button" class="btn primary-btn" id="step4-next">
              Proceed to Payment
            </button>
          </div>
        </div>

        <!-- Step 5: Confirmation -->
        <div class="step-content" id="step5-content" style="display: none;">
          <div class="booking-confirmation">
            <i class="fas fa-check-circle" style="font-size: 4rem; color: var(--success-color);
              display: block; text-align: center; margin-bottom: 20px;"></i>
            <h3 style="text-align: center;">Booking Confirmed!</h3>
            <p style="text-align: center; margin-bottom: 30px;">
              Your booking has been confirmed. A confirmation email has been sent
              to your email address.
            </p>
            <div class="booking-details">
              <h4>Booking Details</h4>
              <div class="summary-item">
                <span>Booking Reference:</span>
                <span id="booking-reference">—</span>
              </div>
              <div id="confirmation-details"></div>
            </div>
            <div class="booking-actions" style="justify-content: center; margin-top: 30px;">
              <a href="index.html" class="btn secondary-btn">Return to Home</a>
              <button type="button" class="btn primary-btn" id="download-ticket">
                Download Ticket
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div class="footer-about">
          <h3>About Kuching ART</h3>
          <p>
            Kuching Autonomous Rapid Transit is Sarawak’s premier public
            transportation system, providing modern, efficient, and sustainable
            mobility solutions for the people of Kuching.
          </p>
        </div>
        <div class="footer-links">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#schedules">Schedules</a></li>
            <li><a href="index.html#routes">Routes</a></li>
            <li><a href="index.html#fares">Fares</a></li>
            <li><a href="index.html#contact">Contact</a></li>
          </ul>
        </div>
        <div class="footer-service">
          <h3>Customer Services</h3>
          <ul>
            <li><a href="booking.html">Book Tickets</a></li>
            <li><a href="manage-booking.html">Manage Bookings</a></li>
            <li><a href="cancel-refund.html">Refund Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </div>
        <div class="footer-newsletter">
          <h3>Newsletter</h3>
          <p>Subscribe for updates and promotions.</p>
          <form>
            <input type="email" placeholder="Your Email Address" required />
            <button type="submit" class="btn">Subscribe</button>
          </form>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 Kuching Autonomous Rapid Transit. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Load only the two service modules, then booking.js (module mode) -->

  <script type="module" src="js/app.js"></script>
  <script type="module" src="js/models/Booking.js"></script>
</body>

</html>